!function(){"use strict";var e,t={98:function(){const e=GLSR.Utils.dom,t=GLSR.Utils.parseJson;let r,o,n,s="glsr.images";const i=e=>{const t=e.code||"unknown",r=e.message||"Unable to load the form.";o.content(r,{class:`is-modal-error is-${t}-error`})},a=(e,t)=>{if(!GLSR.Utils.isEmpty(e?.message))return void i(e);const r=t?.action;"delete-review"!==r?"respond-to-review"!==r?"update-review"!==r?i(e):f(e,t):d(e,t):c(e,t)},l=t=>{if(!0!==t?.success)return;const r="#review-"+o.trigger.dataset.id;document.querySelectorAll(r).forEach(((o,n)=>{let s=e("div");s.innerHTML=t.rendered[n],o.outerHTML=s.querySelector(r).outerHTML})),GLSR.Modal.close("glsr-modal-author")},c=(e,t)=>{o.header(e.header),o.content(e.content,{class:e.class}),o.footer(e.footer);o.content().querySelector("form")?(GLSR.Event.on("site-reviews/form/handle",v),GLSR.Event.trigger("site-reviews/init")):(i({code:"unknown"}),console.error({data:t,response:e}))},d=(t,n)=>{o.header(t.header),o.content(t.content,{class:t.class}),o.footer(t.footer);const s=o.content().querySelector("form");s?(s.insertAdjacentElement("afterbegin",e("input",{name:`${GLSR.nameprefix}[attributes]`,type:"hidden",value:JSON.stringify(r)})),GLSR.Event.on("site-reviews/form/handle",l),GLSR.Event.trigger("site-reviews/init")):(i({code:"unknown"}),console.error({data:n,response:t}))},f=(t,a)=>{const c={class:t.class,style:t.style};a.theme&&(c["data-theme"]=a.theme),o.header(t.header),o.content(t.content,c),o.footer(t.footer);const d=o.content().querySelector("form");var f;d?(d.insertAdjacentElement("afterbegin",e("input",{name:`${GLSR.nameprefix}[attributes]`,type:"hidden",value:JSON.stringify(r)})),f=t.images,n=localStorage.getItem(s),n&&localStorage.removeItem(s),localStorage.setItem("glsr.images",JSON.stringify(f)),setTimeout((()=>{GLSR.Event.on("site-reviews/form/handle",l),GLSR.Event.trigger("site-reviews/init"),o.content().querySelectorAll(".glsr-dropzone").forEach((e=>{e.dropzone.on("deleted-image",u)}))}),50)):(i({code:"unknown"}),console.error({data:a,response:t}))},u=e=>{const t=e?.id||0;t&&document.querySelectorAll(`.glsr-image[data-id="${t}"]`).forEach((e=>{const t=e.parentNode;e.remove(),0===t.childElementCount&&t.remove()}))},v=e=>{if(!0!==e?.success)return;const t="#review-"+o.trigger.dataset.id;document.querySelectorAll(t).forEach((async(e,t)=>{await GLSR.Utils.fadeOut(e,200),e.parentNode.removeChild(e)})),((e,t)=>{GLSR.Modal.modify(t,(t=>{t.root.classList.add("glsr-modal-small"),t.root.classList.add("glsr-modal-success"),t.header(e.title),t.content(e.message)}))})(e,"glsr-modal-author"),GLSR.Modal.close("glsr-modal-review")};var g=()=>{GLSR.Modal.init("glsr-modal-author",{focus:!0,onClose:e=>{const t=e.trigger.dataset.action;"delete-review"===t&&GLSR.Event.off("site-reviews/form/handle",v),"update-review"===t&&n&&localStorage.setItem(s,n),~["update-review","respond-to-review"].indexOf(t)&&(GLSR.Event.off("site-reviews/form/handle",l),GLSR.Event.trigger("site-reviews/init")),GLSR.forms=GLSR.forms.filter((e=>!!e.form.closest("body"))),e.content(""),r={},o=null},onOpen:e=>{var n,s;o=e,(e=>{r={},document.querySelectorAll("#review-"+e).forEach(((e,o)=>{var n;const s=JSON.parse(JSON.stringify(e.closest(".glsr")?.dataset||{}));r[o]=null!==(n=r[o])&&void 0!==n?n:{},Object.keys(s).forEach((e=>{if(!~["form","hide","theme"].indexOf(e))return;let[n,i]=t(s[e]);Array.isArray(i)&&(i=i.toString()),r[o][e]=i}))}))})(e.trigger.dataset.id);const l=e.trigger.dataset.action,c={action:l,form:null!==(n=e.trigger.closest(".glsr")?.dataset?.form)&&void 0!==n?n:"",review_id:e.trigger.dataset.id,theme:null!==(s=e.trigger.closest(".glsr")?.dataset?.theme)&&void 0!==s?s:""};"delete-review"===l&&e.root.classList.add("glsr-modal-small"),((e,t,r)=>{o.header("Loading..."),o.root.classList.add("is-loading"),GLSR.ajax.post(GLSR.ajax.data(e,t),((e,n)=>{if(n)return o.root.classList.remove("is-loading"),r(e,t);i(e),console.error({data:t,response:e})}))})(`fetch-${l}-form`,c,a)}})};const m="site-reviews-authors",S=()=>g();GLSR.Event.on(m+"/init",S),GLSR.Event.on("site-reviews/modal/open",S),GLSR.Event.on("site-reviews/pagination/init",S),GLSR.Event.on("site-reviews/pagination/handle",S),GLSR.Event.on("site-reviews/init",(()=>{GLSR.Event.trigger(m+"/init")}))},115:function(){}},r={};function o(e){var n=r[e];if(void 0!==n)return n.exports;var s=r[e]={exports:{}};return t[e](s,s.exports,o),s.exports}o.m=t,e=[],o.O=function(t,r,n,s){if(!r){var i=1/0;for(d=0;d<e.length;d++){r=e[d][0],n=e[d][1],s=e[d][2];for(var a=!0,l=0;l<r.length;l++)(!1&s||i>=s)&&Object.keys(o.O).every((function(e){return o.O[e](r[l])}))?r.splice(l--,1):(a=!1,s<i&&(i=s));if(a){e.splice(d--,1);var c=n();void 0!==c&&(t=c)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[r,n,s]},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={477:0,494:0};o.O.j=function(t){return 0===e[t]};var t=function(t,r){var n,s,i=r[0],a=r[1],l=r[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(n in a)o.o(a,n)&&(o.m[n]=a[n]);if(l)var d=l(o)}for(t&&t(r);c<i.length;c++)s=i[c],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return o.O(d)},r=self.webpackChunk=self.webpackChunk||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),o.O(void 0,[494],(function(){return o(98)}));var n=o.O(void 0,[494],(function(){return o(115)}));n=o.O(n)}();